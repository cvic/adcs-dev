---
import { useTranslations, type Lang } from "@/i18n";
import { getRelativeLocaleUrl } from "astro:i18n";

import SelectCounties from "./SelectCounties.astro";
import AndDivider from "./AndDivider.astro";
import GeoLocation from "./GeoLocation.astro";
import Details from "./Details.astro";
import FileUpload from "./FileUpload.astro";
import TermsAndConditions from "./TermsAndConditions.astro";

const t = useTranslations(Astro.currentLocale as Lang);
const locale = Astro.currentLocale as Lang;
---

<div class="more_info_container accordion hidden" id="hiddenComponent">
  <p class="more_info">
    {
      t({
        en: "This page is for those who need help from the community — the response is **not guaranteed**",
        ro: "Această pagină este adresată celor care au nevoie de ajutor din partea comunității — timpul de răspuns **nu este garantat**.",
      })
    }
  </p>
  <p class="more_info">
    {
      t({
        en: " Your browser will display a message asking for access to your GPS location. Allow access for the most accurate location.",
        ro: " Browser-ul va afișa un mesaj pentru a solicita acces la locația ta GPS. Confirmă accesul pentru o localizare cât mai precisă.",
      })
    }
  </p>
  <p class="more_info">
    {
      t({
        en: " Fields marked with a red * are **mandatory**.",
        ro: " Câmpurile marcate cu * rosie sunt obligatorii",
      })
    }
  </p>
  <p class="more_info">
    {
      t({
        en: "  After submitting the form, members in your area will be automatically notified by SMS and email!",
        ro: "  După trimiterea formularului, membrii din zona ta vor fi automat notificați prin SMS și email!",
      })
    }
  </p>

  <form id="form-help" class="more_info">
    <div class="row">
      <SelectCounties selected="B" />
      <AndDivider />
      <GeoLocation />
    </div>

    <div class="row">
      <Details />
    </div>

    <div class="row">
      <FileUpload />
    </div>

    <div class="row">
      <TermsAndConditions />
    </div>
  </form>
</div>
<style>
  #form-help {
    padding: 1rem;
    //background: linear-gradient(
      0.5turn,
      var(--color-base),
      90%,
      var(--color-accent)
    );
    background-color: color-mix(in srgb, var(--color-base) 70%, transparent);
  }

  .row {
    margin-top: 2rem;
    border-left: 2px solid var(--color-theme);
    padding-left: 0.5rem;
  }

  .more_info {
    display: block; /* keep layout consistent */
    margin: 0;
    text-align: justify;
    font-size: 0.7rem;
  }

  .accordion {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition:
      max-height 0.5s ease,
      opacity 0.5s ease;
  }

  .accordion.show {
    max-height: 100rem; /* pick a value bigger than your content */
    opacity: 1;
  }

  .hidden {
    display: none;
  }
</style>
